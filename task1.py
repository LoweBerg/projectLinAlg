import numpy as np
import matplotlib.pyplot as plt
from scipy.optimize import fmin

X1 = np.array([-5.0,
               -4.473684210526316,
               -3.947368421052632,
               -3.4210526315789473,
               -2.8947368421052633,
               -2.368421052631579,
               -1.8421052631578947,
               -1.3157894736842106,
               -0.7894736842105265,
               -0.2631578947368425,
               0.2631578947368416,
               0.7894736842105257,
               1.3157894736842106,
               1.8421052631578947,
               2.3684210526315788,
               2.894736842105263,
               3.421052631578947,
               3.947368421052632,
               4.473684210526315,
               5.0])

Y1 = np.array([-3.8214130281395384
    , -3.4193887110325143
    , -2.5661253640159583
    , -1.775098291142789
    , -1.0856313118090484
    , -2.281145922997222
    , -1.0925080217035064
    , 0.04196956346189595
    , -0.7073390282943666
    , 1.010429892882658
    , 2.237370616506767
    , 1.9245548728985702
    , 2.79729220264899
    , 2.3823270467509614
    , 4.061315773975142
    , 3.0683027990952865
    , 3.936954278819055
    , 4.568106293943185
    , 5.778550917642228
    , 6.528404914496181])


X2 = np.array([
    10.0,
    8.0,
    13.0,
    9.0,
    11.0,
    14.0,
    6.0,
    4.0,
    12.0,
    7.0,
    5.0
])

"""
x,y1,y2,y3
10.0, 8.04, 9.14, 7.46
8.0, 6.95, 8.14, 6.77
13.0, 7.58, 8.74, 12.74
9.0, 8.81, 8.77, 7.11
11.0, 8.33, 9.26, 7.81
14.0, 9.96, 8.1, 8.84
6.0, 7.24, 6.13, 6.08
4.0, 4.26, 3.1, 5.39
12.0, 10.84, 9.13, 8.15
7.0, 4.82, 7.26, 6.42
5.0, 5.68, 4.74, 5.73
"""
Y2 = np.array([
    [8.04, 9.14, 7.46],
    [6.95, 8.14, 6.77],
    [7.58, 8.74, 12.74],
    [8.81, 8.77, 7.11],
    [8.33, 9.26, 7.81],
    [9.96, 8.1, 8.84],
    [7.24, 6.13, 6.08],
    [4.26, 3.1, 5.39],
    [10.84, 9.13, 8.15],
    [4.82, 7.26, 6.42],
    [5.68, 4.74, 5.73]
])


#dosent work cuz fmin can't solve for two variables
"""min = []
for i in range(len(X)):
    min.append(fmin(lambda a, b: np.linalg.norm(a*X[i] + b - Y[i]), x0 = 0)) 
"""

''' 
X_1 = []
for i in range(len(X)):
    X_1.append(X[i]**2)

XY_1 = []
for i in range(len(X)):
    XY_1.append(X[i]*Y[i])

var1 = sum(X)
var2 = sum(Y)
var3 = sum(X_1)
var4 = sum(XY_1)

def f(a):
    a*var3 + ((var2 - a*var1)/20)*var1 - var4
print(var1)
print(var2)
print(var3)
print(var4)
'''


def func(v: np.ndarray):
    yhatt = v[0] * x + v[1] * np.ones(20)
    kost = np.linalg.norm(yhatt - y)
    return kost

x = X1
y = Y1
cofs = fmin(func, x0=np.array([1, 1]), xtol=0.000001)
print("Coefficients:", cofs)  #  Coefficients: [0.97754289 1.07934658]
